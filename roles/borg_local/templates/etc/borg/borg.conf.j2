#!/usr/bin/env bash
# {{ ansible_managed }}
# 2023111001

FILES_INCLUDE="{{ borg_local__include_files }}"
FILES_EXCLUDE="{{ borg_local__exclude_files }}"

RETENTION_DAILY={{ borg_local__retention_daily | default('14d') }}
RETENTION_HOURLY={{ borg_local__retention_hourly | default('99H') }}
RETENTION_ONDEMAND=30d

BACKUP_DIR={{ borg_local__backup_dir }}
BACKUP_OPTS="--stats --progress --one-file-system --compression lz4 --checkpoint-interval 86400"

export BORG_RELOCATED_REPO_ACCESS_IS_OK={{ borg_local__relocated_repo_access_is_ok|default('no') }}
export BORG_UNKNOWN_UNENCRYPTED_REPO_ACCESS_IS_OK=no
export BORG_PASSPHRASE="$(cat /etc/borg/borg-passphrase)"
