borg_local__backup_dir: '/backup'
borg_local__backup_hourly_enabled: false
borg_local__on_calendar_daily_hour: 23
borg_local__on_calendar_daily: '*-*-* {{ borg_local__on_calendar_daily_hour }}:{{ 45|random(seed=inventory_hostname) }}'
borg_local__on_calendar_hourly: '*-*-* *:{{ 59 |random(start=45) }}'
borg_local__exclude_files: "--exclude /root/.cache --exclude '*.svn*' --exclude '*.git*' --exclude '*.tmp' --exclude '*.temp' --exclude '*/cache/*' --exclude '*/log/*'"
borg_local__include_files: '/etc /home /opt /root /var/spool/cron'
borg_local__relocated_repo_access_is_ok: 'no' # has to be a string!
borg_local__retention_daily: '90d'
borg_local__retention_hourly: '99H'
borg_local__service_enabled: true

borg_local__systemd_unit__services__dependent_var:
  - name: 'borg-backup-daily'
    raw_service: |-
      ExecStart=/usr/local/bin/borg-backup daily
      Type=oneshot
      User=root
  - name: 'borg-backup-hourly'
    raw_service: |-
      ExecStart=/usr/local/bin/borg-backup hourly
      Type=oneshot
      User=root

borg_local__systemd_unit__timers__dependent_var:
  - name: 'borg-backup-daily'
    raw_timer: |-
      OnCalendar={{ borg_local__on_calendar_daily }}
  - name: 'borg-backup-hourly'
    raw_timer: |-
      OnCalendar={{ borg_local__on_calendar_hourly }}
